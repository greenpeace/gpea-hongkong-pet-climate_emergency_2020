(function(t){function e(e){for(var o,a,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={app:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="https://api.greenpeace.org.hk/2020/petition/zh-hk.2020.climate.climate_emergency_2020.general.signup.na.mc/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"antialiased font-nototc relative flex flex-col items-center",attrs:{id:"app"}},[n("header",{staticClass:"header relative w-full px-4 py-2 header--white"},[n("div",{staticClass:"container mx-auto flex items-center justify-between"},[t._m(0),n("div",{staticClass:"bg-cyan nav-button"},[n("button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#enform",expression:"'#enform'"}],staticClass:"btn"},[t._v("立即聯署")])])])]),n("main",{staticClass:"main relative"},[n("div",{staticClass:"grid gap-4"},[t._m(1),n("Climate")],1),n("slide-x-right-transition",{attrs:{duration:400}},[n("aside",{staticClass:"aside-enform enform relative"},[n("div",{staticClass:"form-container form-container--sticky sticky",attrs:{id:"enform"}},[t.formSubmitted?t._e():n("div",{staticClass:"form-header mt-2 mb-4 text-2xl text-center font-bold"},[n("h2",{staticClass:"mb-2"},[t._v("爭分奪秒 拯救氣候危機")]),n("p",{staticClass:"font-normal text-sm"},[t._v(" 一同發聲，告訴政府「香港人關注氣候議題」 "),n("br"),t._v("凝聚力量要求正視氣候危機！ ")])]),n("div",{staticClass:"enform-progress my-4"},[n("div",{staticClass:"overflow-hidden rounded shadow w-full bg-gray-200"},[n("div",{staticClass:"bg-cyan transition-all font-bold text-white py-1 text-center",style:{width:(this.signupProgress||0)+"%"}},[t._v(t._s(this.participants?this.participants.toLocaleString()+"人已聯署":"-")+" ")])])]),n("div",{staticClass:"form-body enform"},[t.formSubmitted?t._e():n("MCForm",{on:{onSubmit:t._onSubmit}}),t.formSubmitted?n("ThankYouBlock"):t._e()],1)])])])],1)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{staticClass:"logo logo--green",attrs:{src:"https://api.greenpeace.org.hk/general/logo/GP-logo-2019-TC-green-%5bweb%5d-01.png",alt:"logo"}}),n("img",{staticClass:"logo logo--white",attrs:{src:"https://api.greenpeace.org.hk/general/logo/GP-logo-2019-TC-white-%5bweb%5d-01.png",alt:"logo"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content bg-gray-100"},[n("section",{staticClass:"section-hero relative"},[n("div",{staticClass:"col-xs-12"},[n("h1",{staticClass:"text-green mt-8 mb-4 flex flex-wrap align-center justify-center tracking-wider text-4xl font-bold"},[n("div",[t._v("爭分奪秒")]),n("div",{staticClass:"mx-2"}),n("div",[t._v("拯救氣候危機")])])])])])}],a=(n("13d5"),n("b64b"),n("d3b7"),n("323e")),s=n.n(a);s.a.configure({showSpinner:!1});var c={name:"App",components:{Climate:Climate,MCForm:MCForm,ThankYouBlock:ThankYouBlock,FullLoadingPage:FullLoadingPage},data:function(){return{supermarkets:supermarkets,supermarketImages:supermarketImages,isMobile:!1,scrollDepth:0,currentPage:0,showMobileButton:!0,showFormModal:!0,formSubmitted:!1,participants:0,goal:0,isLoading:!1}},methods:{scrollIntoView:function(t){t.preventDefault();var e=t.target.getAttribute("href"),n=e?document.querySelector(e):null;n&&(this.$refs.content.scrollTop=n.offsetTop)},checkMobile:function(){var t=window.matchMedia("screen and (max-width:767px)").matches;return this.isMobile=t,t},getDocumentHeight:function(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight},getScrollTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},handleScroll:function(){var t=this.getScrollTop()/this.innerHeight;this.scrollDepth=Math.round(100*t)},_onSubmit:function(t){var e=this;try{this.isLoading=!0;var n=mcHelper.fetchFormInputs("#mc-form");for(var o in t)o in n&&(n[o]=t[o]);fetch(mcHelper.getPostURL(),{method:"POST",body:Object.keys(n).reduce((function(t,e){return t.append(e,n[e]),t}),new FormData)}).then((function(t){return t.json()})).then((function(t){e.isLoading=!1,t.Supporter?(mcHelper.sendPetitionTracking("2020-climate"),e.formSubmitted=!0,e.participants+=1,document.querySelector(".enform").scrollIntoView()):console.error(t)})).catch((function(t){e.isLoading=!1,alert(t),console.error(t)}))}catch(r){console.error(r)}}},computed:{mobileBtnText:function(){return this.formSubmitted?"感謝您聯署發聲":"立即聯署"},innerHeight:function(){return this.getDocumentHeight()-this.getWindowHeight()},signupProgress:function(){return this.participants?Math.round(this.participants/this.goal*100):0}},created:function(){s.a.start(),window.addEventListener("scroll",this.handleScroll)},mounted:function(){var t=this;this.checkMobile();var e=mcHelper.getNumSignupsAndTarget(),n=e.numSignupTarget,o=e.numSignup;this.goal=n,this.participants=0,setTimeout((function(){t.participants=o}),1e3),this.$nextTick((function(){s.a.done()}))},destroyed:function(){document.removeEventListener("scroll",this.handleScroll),console.warn("Please refresh the page")}},l=c,u=(n("5c0b"),n("2877")),d=Object(u["a"])(l,r,i,!1,null,null,null),f=d.exports,m=n("7c76"),p=n("f13c"),h=n.n(p);n("f5df1"),n("a5d8"),n("b20f");o["a"].use(m["a"]),o["a"].use(h.a,{duration:300,easing:"ease",offset:-8}),o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),r=n.n(o);r.a},"9c0c":function(t,e,n){},b20f:function(t,e,n){}});
//# sourceMappingURL=app.19970fcc.js.map